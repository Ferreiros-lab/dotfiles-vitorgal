# oh-my-zsh
ZSH=${HOME}/.oh-my-zsh # config dir
DISABLE_UPDATE_PROMPT=true # auto-update without prompting
ZSH_THEME="oneend" # set name of the theme to load (in ~/.oh-my-zsh/themes/)
plugins=(brew git git-extras zsh-syntax-highlighting) # plugins to load
source ${ZSH}/oh-my-zsh.sh # load it

# set default ruby to use, via chruby
source /usr/local/share/chruby/chruby.sh
chruby ruby

# other settings
unsetopt correct_all # disable autocorrect
export LSCOLORS=hxfxcxdxbxegedabagacad
export PATH="/usr/local/bin:/usr/local/sbin:$PATH:/usr/local/share/npm/bin"
export EDITOR="vim"
export HOMEBREW_CASK_OPTS="--appdir=/Applications"
export LANG=en_GB.UTF-8
export LC_ALL=en_GB.UTF-8

# source z and crafts
source "$(brew --prefix)/etc/profile.d/z.sh"
source "$(brew --prefix)/etc/profile.d/crafts"

############################################

# aliases and functions
# update homebrew
alias brewu='brew update && brew upgrade && brew doctor && brew cleanup --force -s && rm -rf "$(brew --cache)"'

# Fix duplicates in “open with”
alias openwithfix='/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister -kill -r -domain local -domain system -domain user && killall Finder'

# cd to default Code directory
alias cdc='cd ~/Dropbox/work/personal/code'

# cd to default Processing directory
alias cdp='cd ~/Dropbox/work/personal/processing'

# delete .DS_Store files
alias dsd='find . -iname ".DS_Store" -delete'

# delete empty files and dirs
alias zerod='find . -empty -delete 2>/dev/null'

# quicklook
alias ql='qlmanage -p &>/dev/null'

# search in history
alias h='history | grep'

# ISS live stream with audio
iss() {
  livestreamer "http://www.ustream.tv/channel/iss-hdev-payload" best &
  while true; do
    livestreamer "http://www.youtube.com/watch?v=UwAzXBCCQrQ" best
    sleep 3
  done
}

# fix file and directory permissions
permissionsfix() { find "$@" -type d -exec chmod 755 {} \; && find "$@" -type f -exec chmod 644 {} \; }

# get shasum fast
shacurl() {
  sha256=$(curl -#L "$1" | shasum -a 256 | sed 's/ .*//' | tr -d '\n')
  echo "${sha256}"
  echo -n "${sha256}" | pbcopy
}

# aliases for git
unalias gm # to not conflict with graphicsmagick
alias g='git'
alias ga='git add --all'
alias gap='git add --patch'
alias gb='git branch'
alias gbd='git branch -d'
alias gbD='git branch -D'
alias gc='git commit -v'
alias gco='git checkout'
alias gcb='git checkout -b'
alias gcm='git checkout master'
alias gcp='git cherry-pick'
alias gd='git diff'
alias gl='git log --graph --pretty=format":%C(yellow)%h%Cblue%d%Creset %s %C(white) %an, %ar%Creset"'
alias gme='git merge --no-ff'
alias gmf='git merge --ff-only'
alias gp='git push'
alias gpoat='git push origin --all && git push origin --tags'
alias gpom='git push origin master'
alias gpo='git push origin'
alias gpum='git push upstream master'
alias gplom='git pull origin master'
alias gplum='git pull upstream master'
alias gpl='git pull'
alias gre='git remote'
alias gr='git reset'
alias grh='git reset --hard'
alias grhh='git reset HEAD --hard'
alias grb='git rebase -i'
alias grbh='git rebase -i HEAD~'
alias gs='git stash'
alias gsl='git stash list'
alias gsa='git stash apply'
alias gsb='git stash branch'
alias gst='git status'
alias gss='git status -s'
alias gclean='git clean -ndx'
alias gcleanf='git clean -dxf'
